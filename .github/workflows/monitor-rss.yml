name: RSS Feed Monitor

# on:
#   schedule:
#     - cron: "0 * * * *"

on:
  push:
    branches:
      - main
      - notifications

jobs:
  rss-monitor:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 14

      - name: Install Dependencies
        run: npm install firebase-admin rss-parser

      - name: Run RSS Monitor
        run: node .github/scripts/monitor-rss.js
        env:
          FIREBASE_CREDENTIALS: ${{ secrets.FIREBASE_CREDENTIALS }}
          RSS_FEED_URL: "https://love-of-god-and-of-all-men.github.io/feed.xml"
